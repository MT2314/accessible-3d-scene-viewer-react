/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/

import React, { useRef, useState } from 'react'
import { A11y, useA11y } from '@react-three/a11y'
import { Html, } from '@react-three/drei'

export default function ChildMesh(props) {
    const [clicked, setClicked] = useState(false)
    const childMeshRef = useRef()
    const a11y = useA11y()

    let mesh = props.mesh

    console.log(clicked)
    return (


        <A11y
            key={props.index}
            role="togglebutton"
            startPressed={false}
            activationMsg={mesh.A11yMessage}
            deactivationMsg=""
            tabindex="-1"
        >
            <mesh
                onClick={(e) => {
                    e.stopPropagation();
                    setClicked(!clicked)
                }}
                key={`childMesh` + props.index}
                geometry={props.geometry}
                material={props.material}
                ref={childMeshRef}
            >
                {a11y.focus ? <meshStandardMaterial
                    attach="material"
                    color={clicked || a11y.pressed ? "purple" : a11y.focus ? "blue" : a11y.hover ? "yellow" : "green"}
                /> : ""}

                {/* Should have || A11y clicked but not wokring correctly- redcues clickable space to the absolute div that holds the alabels original position */}
                {clicked || a11y.pressed && (

                    <Html distanceFactor={mesh.labelDistance}>
                        <div
                            className="content"
                            tabIndex="-1"
                        >
                            {mesh.labelContent}
                        </div>
                    </Html>
                )}
            </mesh>
        </A11y>
    )
}
