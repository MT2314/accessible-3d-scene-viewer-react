/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/

import React, { useRef, useState } from 'react'
import { A11y, useA11y } from '@react-three/a11y'
import { Html, } from '@react-three/drei'

export default function ChildMesh(props) {
    const [clicked, setClicked] = useState(false)
    const childMeshRef = useRef()
    const a11y = useA11y()

    let mesh = props.mesh
    return (


        <A11y
            key={props.index}
            role="togglebutton"
            startPressed={false}
            activationMsg={mesh.A11yMessage}
            deactivationMsg=""
            tabindex="-1"

        >
            <mesh
                onClick={(e) => {
                    setClicked(!clicked)
                }}
                key={`childMesh` + props.index}
                geometry={props.geometry}
                material={props.material}
                ref={childMeshRef}
            >
                {clicked ? <meshStandardMaterial
                    attach="material"
                    color="purple"
                    // roughness={0.3}
                    // metalness={1.0}
                /> : ""}

                {/* Should have || A11y clicked but not wokring correctly- redcues clickable space to the absolute div that holds the alabels original position */}
                {clicked && (

                    <Html distanceFactor={mesh.labelDistance}>
                        <div
                            className="content"
                            tabIndex="-1"
                        >
                            {mesh.labelContent}
                        </div>
                    </Html>
                )}
            </mesh>
        </A11y>
    )
}
