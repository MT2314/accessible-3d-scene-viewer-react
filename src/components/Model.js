/*
Auto-generated by: https://github.com/pmndrs/gltfjsx
*/

import React from 'react'
import ParentMesh from './ParentMesh'
import { A11y, useA11y } from '@react-three/a11y'
import processGltf from '../utils/gltfjsx'

export default function Model(props) {
  let meshArr = props.meshes
  let meshDetails = processGltf()
  //error in console being caused by calling the above function 
console.log("render")
console.log("meshDeatils", meshDetails)
  return (
    <>
      {meshDetails.map((mesh, index) => {
        return (
          <group {...props} dispose={null} scale={50} key={`group` + index}>
            <A11y
              key={props.index}
              role="togglebutton"
              startPressed={false}
              // activationMsg={mesh.A11yMessage}
              deactivationMsg=""
              tabindex="-1"
              a11yElStyle={{ pointerEvents: 'none' }}
            >
              <ParentMesh
                key={`parent` + index}
                index={index}
                mesh={mesh}
                gltf={mesh.gltf}
              />
            </A11y>
          </group>
        )
      })}
      {/* This code pulls from the JSON file and includes labels */}
      {/* {meshArr.map((mesh, index) => {
        return (
          <group {...props} dispose={null} scale={50} key={`group` + index}>
            <A11y
              key={props.index}
              role="togglebutton"
              startPressed={false}
              activationMsg={mesh.A11yMessage}
              deactivationMsg=""
              tabindex="-1"
              a11yElStyle={{ pointerEvents: 'none' }}
            >
              <ParentMesh
                key={`parent` + index}
                index={index}
                mesh={mesh}
                gltf={props.gltfFile}
              />
            </A11y>
          </group>
        )
      })} */}
    </>
  )
}

// useGLTF.preload('../../dist/assets/gltf/double-mushroom.gltf')

